<!DOCTYPE html>
<html>
<head>
  <title>File Browser</title>
</head>
<body>
  <h1>File Browser</h1>
  <div id="fileList"></div>

  <script>
    async function loadFiles(path = '') {
      const res = await fetch(`/files?path=${encodeURIComponent(path)}`);
      const files = await res.json();

      const fileList = document.getElementById('fileList');
      fileList.innerHTML = `<h2>${path || 'Root'}</h2>`;

      files.forEach(file => {
        const el = document.createElement('div');
        el.textContent = (file.isDir ? '[DIR] ' : '') + file.name;
        if (file.isDir) {
          el.style.fontWeight = 'bold';
          el.style.cursor = 'pointer';
          el.onclick = () => loadFiles(path + '/' + file.name);
        }
        fileList.appendChild(el);
      });
    }

    loadFiles();
  </script>
</body>
</html>
