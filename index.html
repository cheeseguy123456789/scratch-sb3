<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>public/repo/</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .item {
      margin: 5px 0;
      cursor: pointer;
    }
    .item:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <h1>public</h1>
  <div id="path">/</div>
  <div id="fileList"></div>

  <script>
    const owner = 'cheeseguy123456789';
    const repo = 'scratch-sb3';
    let currentPath = '';

    async function loadFiles(path = '') {
      currentPath = path;
      document.getElementById('path').textContent = '/' + path;

      const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
      const response = await fetch(apiUrl);
      const files = await response.json();

      const fileList = document.getElementById('fileList');
      fileList.innerHTML = '';

      if (path) {
        const upItem = document.createElement('div');
        upItem.textContent = 'â¬…ï¸ Up';
        upItem.className = 'item';
        upItem.onclick = () => {
          const segments = path.split('/');
          segments.pop();
          loadFiles(segments.join('/'));
        };
        fileList.appendChild(upItem);
      }

      files.forEach(file => {
        const item = document.createElement('div');
        item.className = 'item';
        item.textContent = file.type === 'dir' ? `ðŸ“ ${file.name}` : `ðŸ“„ ${file.name}`;

        if (file.type === 'dir') {
          item.onclick = () => loadFiles(path ? `${path}/${file.name}` : file.name);
        } else {
          item.onclick = () => window.open(file.html_url, '_blank');
        }

        fileList.appendChild(item);
      });
    }

    loadFiles();
  </script>

</body>
</html>
